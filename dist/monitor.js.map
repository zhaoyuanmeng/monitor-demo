{"version":3,"file":"monitor.js","sources":["../src/utils/xhr.js","../src/utils/utils.js","../src/utils/cache.js","../src/utils/generateUniqueID.js","../src/config.js","../src/utils/report.js","../src/error/index.js","../src/performance/utils.js","../src/performance/observeEntries.js","../src/performance/observePaint.js","../src/performance/observeLCP.js","../src/performance/observeCLS.js","../src/performance/observeFID.js","../src/performance/observerLoad.js","../src/performance/observeFirstScreenPaint.js","../src/performance/xhr.js","../src/performance/fetch.js","../src/performance/fps.js","../src/performance/onVueRouter.js","../src/performance/index.js","../src/behavior/utils.js","../src/behavior/pv.js","../src/behavior/pageAccessDuration.js","../src/behavior/pageAccessHeight.js","../src/behavior/onClick.js","../src/behavior/onVueRouter.js","../src/behavior/pageChange.js","../src/behavior/index.js","../src/index.js"],"sourcesContent":["// 不明白为什么要使用原型，可能是加快执行速度吧\r\nexport const originalProto = XMLHttpRequest.prototype\r\nexport const originalOpen = originalProto.open\r\nexport const originalSend = originalProto.send","export function deepCopy(target) {\r\n    if (typeof target === 'object') {\r\n        const result = Array.isArray(target) ? [] : {}\r\n        for (const key in target) {\r\n            if (typeof target[key] == 'object') {\r\n                result[key] = deepCopy(target[key])\r\n            } else {\r\n                result[key] = target[key]\r\n            }\r\n        }\r\n\r\n        return result\r\n    }\r\n\r\n    return target\r\n}\r\n// 当一条会话历史记录被执行的时候将会触发页面显示 (pageshow) 事件。\r\n// (这包括了后退 / 前进按钮操作，同时也会在 onload 事件触发后初始化页面时触发)\r\nexport function onBFCacheRestore(callback) {\r\n    window.addEventListener('pageshow', event => {\r\n        // persisted表示网页是否来自于缓存\r\n        if (event.persisted) {\r\n            callback(event)\r\n        }\r\n    }, true)\r\n}\r\n\r\nexport function onBeforeunload(callback) {\r\n    window.addEventListener('beforeunload', callback, true)\r\n}\r\n\r\nexport function onHidden(callback, once) {\r\n    const onHiddenOrPageHide = (event) => {\r\n        if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\r\n            callback(event)\r\n            if (once) {\r\n                window.removeEventListener('visibilitychange', onHiddenOrPageHide, true)\r\n                window.removeEventListener('pagehide', onHiddenOrPageHide, true)\r\n            }\r\n        }\r\n    }\r\n\r\n    window.addEventListener('visibilitychange', onHiddenOrPageHide, true)\r\n    window.addEventListener('pagehide', onHiddenOrPageHide, true)\r\n}\r\n\r\n// 就是保证加载后执行callback函数\r\nexport function executeAfterLoad(callback) {\r\n    // document.readyState  loading（加载中） interactive（文档已被解析，但是诸如图像，样式表和框架之类的子资源仍在加载） \r\n    // complete（文档和所有子资源已完成加载。状态表示 load 事件即将被触发） \r\n    if (document.readyState === 'complete') {\r\n        callback()\r\n    } else {\r\n        const onLoad = () => {\r\n            callback()\r\n            window.removeEventListener('load', onLoad, true)\r\n        }\r\n\r\n        window.addEventListener('load', onLoad, true)\r\n    }\r\n}\r\n\r\n// 获取当前页面的url\r\nexport function getPageURL() {\r\n    return window.location.href \r\n}","import { deepCopy } from './utils'\r\n\r\nconst cache = []\r\n\r\nexport function getCache() {\r\n    return deepCopy(cache)\r\n}\r\n\r\nexport function addCache(data) {\r\n    cache.push(data)\r\n}\r\n\r\nexport function clearCache() {\r\n    cache.length = 0\r\n}\r\n","export default function generateUniqueID() {\r\n    return `v2-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\r\n}","const config = {\r\n    url: '',\r\n    appID: '',\r\n    userID: '',\r\n    vue: {\r\n        Vue: null,\r\n        router: null,\r\n    },\r\n}\r\n\r\nexport default config\r\n\r\nexport function setConfig(options) {\r\n    for (const key in config) {\r\n        if (options[key]) {\r\n            config[key] = options[key]\r\n        }\r\n    }\r\n}","import { originalOpen, originalSend } from './xhr'\r\nimport { addCache, getCache, clearCache } from './cache'\r\nimport generateUniqueID from '../utils/generateUniqueID'\r\nimport config from '../config'\r\n\r\n// 判断是不是支持sendBeacon这种模式\r\nexport function isSupportSendBeacon() {\r\n    return !!window.navigator?.sendBeacon\r\n}\r\n// 在 unload 事件中，使用 XHR 异步发送数据。这种做法有可能导致服务端未收到数据，浏览器就已经断开连接,，数据就会丢失。\r\n// 虽然AJAX支持同步请求，但这种做法会阻塞页面的跳转，影响用户体验。\r\n// 基于此引入Beacon这种方法，使用navigator.sendBeacon(url, data) 方法会使用户代理在有机会时异步地向服务器发送数据，\r\n// 同时不会延迟页面的卸载或影响下一导航的载入性能。\r\n\r\n// 所以这个sendBeacon 如果支持就是sendBeacon方法，如果不支持就是XMLHttpRequest的传统ajax形式\r\nconst sendBeacon = isSupportSendBeacon() ? window.navigator.sendBeacon.bind(window.navigator) : reportWithXHR\r\n\r\n// 随机获取一个sessionID\r\nconst sessionID = generateUniqueID()\r\n// 数据上报  暂时不知道isImmediate这个（立即）有什么用处\r\nexport function report(data, isImmediate = false) {\r\n    if (!config.url) {\r\n        console.error('请设置上传 url 地址')\r\n    }\r\n\r\n    const reportData = JSON.stringify({\r\n        id: sessionID,\r\n        appID: config.appID,\r\n        userID: config.userID,\r\n        data,\r\n    })\r\n    \r\n    if (isImmediate) {\r\n        sendBeacon(config.url, reportData)\r\n        return\r\n    }\r\n    //window.requestIdleCallback()**方法插入一个函数，这个函数将在浏览器空闲时期被调用。\r\n    // 这使开发者能够在主事件循环上执行后台和低优先级工作，而不会影响延迟关键事件，如动画和输入响应。\r\n    // 函数一般会按先进先调用的顺序执行，然而，如果回调函数指定了执行超时时间timeout，则有可能为了在超时前执行函数而打乱执行顺序。\r\n   \r\n    // 这就是为了延迟执行    \r\n    if (window.requestIdleCallback) {\r\n        window.requestIdleCallback(() => {\r\n            sendBeacon(config.url, reportData)\r\n        }, { timeout: 3000 })\r\n    } else {\r\n        setTimeout(() => {\r\n            sendBeacon(config.url, reportData)\r\n        })\r\n    }\r\n}\r\n\r\nlet timer = null\r\n// 加入了防抖的思想 不过每次点击都会把这个错误加入到cache中 只是停顿3s才会上报\r\nexport function lazyReportCache(data, timeout = 3000) {\r\n    addCache(data)\r\n\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n        const data = getCache()\r\n        if (data.length) {\r\n            report(data)\r\n            clearCache()\r\n        }\r\n    }, timeout)\r\n}\r\n\r\nexport function reportWithXHR(data) {\r\n    const xhr = new XMLHttpRequest()\r\n    originalOpen.call(xhr, 'post', config.url)\r\n    originalSend.call(xhr, JSON.stringify(data))\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\r\nimport config from '../config'\r\n\r\n// 闭包的思路写 并且拿到全局的config已经处理好的 但是我认为这样不好 会给自己增加心智负担 后期改成传递参数的形式\r\nexport default function error() {\r\n    // 这里利用了切片编程 跟vue2监听数组的方式改写本身方法思路一样\r\n    const oldConsoleError = window.console.error \r\n    window.console.error = (...args) => { \r\n        // 保证了之前的方式\r\n        oldConsoleError.apply(this, args)\r\n        // 新增的处理\r\n        lazyReportCache({\r\n            type: 'error',\r\n            subType: 'console-error',\r\n            // performance是全局对象可以直接引用在v8引擎下\r\n            startTime: performance.now(),\r\n            errData: args,\r\n            pageURL: getPageURL(),\r\n        })\r\n    }\r\n\r\n    // 捕获资源加载失败错误 js css img...\r\n    window.addEventListener('error', e => {\r\n        const target = e.target\r\n        if (!target) return\r\n\r\n        if (target.src || target.href) {\r\n            const url = target.src || target.href\r\n            lazyReportCache({\r\n                url,\r\n                type: 'error',\r\n                subType: 'resource',\r\n                startTime: e.timeStamp,\r\n                html: target.outerHTML,\r\n                resourceType: target.tagName,\r\n                paths: e.path.map(item => item.tagName).filter(Boolean),\r\n                pageURL: getPageURL(),\r\n            })\r\n        }\r\n    }, true)\r\n\r\n    // 监听 js 错误\r\n    window.onerror = (msg, url, line, column, error) => {\r\n        lazyReportCache({\r\n            msg,\r\n            line,\r\n            column,\r\n            error: error.stack,\r\n            subType: 'js',\r\n            pageURL: url,\r\n            type: 'error',\r\n            startTime: performance.now(),\r\n        })\r\n    }\r\n\r\n    // 监听 promise 错误 缺点是获取不到列数据 后期补充优化方案\r\n    window.addEventListener('unhandledrejection', e => {\r\n        lazyReportCache({\r\n            reason: e.reason?.stack,\r\n            subType: 'promise',\r\n            type: 'error',\r\n            startTime: e.timeStamp,\r\n            pageURL: getPageURL(),\r\n        })\r\n    })\r\n    // 这个就要对接上vue的报错了，vue会给我们提供一个回调函数的写法就是下面的这样\r\n    // 思路拓展一下 react的不也可以吗\r\n    if (config.vue?.Vue) {\r\n        config.vue.Vue.config.errorHandler = (err, vm, info) => {\r\n            console.error(err)\r\n\r\n            lazyReportCache({\r\n                info,\r\n                error: err.stack,\r\n                subType: 'vue',\r\n                type: 'error',\r\n                startTime: performance.now(),\r\n                pageURL: getPageURL(),\r\n            })\r\n        }\r\n    }\r\n\r\n    // 这里表示也要检查缓存的页面数据\r\n    onBFCacheRestore(() => {\r\n        error()\r\n    })\r\n}","// 判断是否支持PerformanceObserver \r\n// PerformanceObserver 可用于获取性能相关的数据，例如首帧fp、首屏fcp、首次有意义的绘制 fmp等等\r\nexport function isSupportPerformanceObserver() {\r\n    return !!window.PerformanceObserver\r\n}","import { isSupportPerformanceObserver } from './utils'\r\nimport { executeAfterLoad } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nexport default function observeEntries() {\r\n    executeAfterLoad(() => {\r\n        observeEvent('resource')\r\n        observeEvent('navigation')\r\n    })\r\n}\r\n\r\nlet hasAlreadyCollected = false\r\nexport function observeEvent(entryType) {\r\n    // 闭包的思路\r\n\r\n    // 这个是为了处理传统分析页面性能分析的（兼容Performance的写法）\r\n    function entryHandler(list) {\r\n        const data = list.getEntries ? list.getEntries() : list\r\n        for (const entry of data) {\r\n            if (entryType === 'navigation') {\r\n                if (hasAlreadyCollected) return\r\n\r\n                if (observer) {\r\n                    observer.disconnect()\r\n                }\r\n\r\n                hasAlreadyCollected = true\r\n            }\r\n            // nextHopProtocol 属性为空，说明资源解析错误或者跨域\r\n            // beacon 用于上报数据，所以不统计。xhr fetch 单独统计\r\n            if ((!entry.nextHopProtocol && entryType !== 'navigation') || filter(entry.initiatorType)) {\r\n                return\r\n            }\r\n\r\n            lazyReportCache({\r\n                name: entry.name, // 资源名称\r\n                subType: entryType,\r\n                type: 'performance',\r\n                sourceType: entry.initiatorType, // 资源类型\r\n                duration: entry.duration, // 资源加载耗时\r\n                dns: entry.domainLookupEnd - entry.domainLookupStart, // DNS 耗时\r\n                tcp: entry.connectEnd - entry.connectStart, // 建立 tcp 连接耗时\r\n                redirect: entry.redirectEnd - entry.redirectStart, // 重定向耗时\r\n                ttfb: entry.responseStart, // 首字节时间\r\n                protocol: entry.nextHopProtocol, // 请求协议\r\n                responseBodySize: entry.encodedBodySize, // 响应内容大小\r\n                responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\r\n                resourceSize: entry.decodedBodySize, // 资源解压后的大小\r\n                isCache: isCache(entry), // 是否命中缓存\r\n                startTime: performance.now(),\r\n            })\r\n        }\r\n    }\r\n\r\n    let observer\r\n    if (isSupportPerformanceObserver()) {\r\n        observer = new PerformanceObserver(entryHandler)\r\n        observer.observe({ type: entryType, buffered: true })\r\n    } else {\r\n        const data = window.performance.getEntriesByType(entryType)\r\n        entryHandler(data)\r\n    }\r\n}\r\n\r\n// 不统计以下类型的资源\r\nconst preventType = ['fetch', 'xmlhttprequest', 'beacon']\r\nconst isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)\r\nif (isSafari) {\r\n    // safari 会把接口请求当成 other\r\n    preventType.push('other')\r\n}\r\n\r\nfunction filter(type) {\r\n    // 返回Boolean\r\n    return preventType.includes(type)\r\n}\r\n\r\nfunction isCache(entry) {\r\n    // 直接从缓存读取或 304\r\n    return entry.transferSize === 0 || (entry.transferSize !== 0 && entry.encodedBodySize === 0)\r\n}","import { isSupportPerformanceObserver } from './utils'\r\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nexport default function observePaint() {\r\n    if (!isSupportPerformanceObserver()) return\r\n    \r\n    const entryHandler = (list) => {        \r\n        for (const entry of list.getEntries()) {\r\n            if (entry.name === 'first-contentful-paint') {\r\n                observer.disconnect()\r\n            }\r\n    \r\n            const json = entry.toJSON()\r\n            delete json.duration\r\n    \r\n            const reportData = {\r\n                ...json,\r\n                subType: entry.name,\r\n                type: 'performance',\r\n                pageURL: getPageURL(),\r\n            }\r\n\r\n            lazyReportCache(reportData)\r\n        }\r\n    }\r\n    \r\n    const observer = new PerformanceObserver(entryHandler)\r\n    observer.observe({ type: 'paint', buffered: true })\r\n\r\n    onBFCacheRestore(event => {\r\n        requestAnimationFrame(() => {\r\n            ['first-paint', 'first-contentful-paint'].forEach(type => {\r\n                lazyReportCache({\r\n                    startTime: performance.now() - event.timeStamp,\r\n                    name: type,\r\n                    subType: type,\r\n                    type: 'performance',\r\n                    pageURL: getPageURL(),\r\n                    bfc: true,\r\n                })\r\n            })\r\n        })\r\n    })\r\n}","import { isSupportPerformanceObserver } from './utils'\r\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nlet lcpDone = false\r\nexport function isLCPDone() {\r\n    return lcpDone\r\n}\r\n\r\nexport default function observeLCP() {\r\n    if (!isSupportPerformanceObserver()) {\r\n        lcpDone = true\r\n        return\r\n    }\r\n    \r\n    const entryHandler = (list) => {\r\n        lcpDone = true\r\n\r\n        if (observer) {\r\n            observer.disconnect()\r\n        }\r\n        \r\n        for (const entry of list.getEntries()) {\r\n            const json = entry.toJSON()\r\n            delete json.duration\r\n\r\n            const reportData = {\r\n                ...json,\r\n                target: entry.element?.tagName,\r\n                name: entry.entryType,\r\n                subType: entry.entryType,\r\n                type: 'performance',\r\n                pageURL: getPageURL(),\r\n            }\r\n            \r\n            lazyReportCache(reportData)\r\n        }\r\n    }\r\n\r\n    const observer = new PerformanceObserver(entryHandler)\r\n    observer.observe({ type: 'largest-contentful-paint', buffered: true })\r\n\r\n    onBFCacheRestore(event => {\r\n        requestAnimationFrame(() => {\r\n            lazyReportCache({\r\n                startTime: performance.now() - event.timeStamp,\r\n                name: 'largest-contentful-paint',\r\n                subType: 'largest-contentful-paint',\r\n                type: 'performance',\r\n                pageURL: getPageURL(),\r\n                bfc: true,\r\n            })\r\n        })\r\n    })\r\n}","import { isSupportPerformanceObserver } from './utils'\r\nimport { onBFCacheRestore, deepCopy, getPageURL, onHidden } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nexport default function observeCLS() {\r\n    if (!isSupportPerformanceObserver()) return\r\n\r\n    onBFCacheRestore(() => {\r\n        observeCLS()\r\n    })\r\n\r\n    let sessionValue = 0\r\n    let sessionEntries = []\r\n    const cls = {\r\n        subType: 'layout-shift',\r\n        name: 'layout-shift',\r\n        type: 'performance',\r\n        pageURL: getPageURL(),\r\n        value: 0,\r\n    }\r\n\r\n    const entryHandler = (list) => {\r\n        for (const entry of list.getEntries()) {\r\n            // Only count layout shifts without recent user input.\r\n            if (!entry.hadRecentInput) {\r\n                const firstSessionEntry = sessionEntries[0]\r\n                const lastSessionEntry = sessionEntries[sessionEntries.length - 1]\r\n            \r\n                // If the entry occurred less than 1 second after the previous entry and\r\n                // less than 5 seconds after the first entry in the session, include the\r\n                // entry in the current session. Otherwise, start a new session.\r\n                if (\r\n                    sessionValue\r\n                    && entry.startTime - lastSessionEntry.startTime < 1000\r\n                    && entry.startTime - firstSessionEntry.startTime < 5000\r\n                ) {\r\n                    sessionValue += entry.value\r\n                    sessionEntries.push(formatCLSEntry(entry))\r\n                } else {\r\n                    sessionValue = entry.value\r\n                    sessionEntries = [formatCLSEntry(entry)]\r\n                }\r\n            \r\n                // If the current session value is larger than the current CLS value,\r\n                // update CLS and the entries contributing to it.\r\n                if (sessionValue > cls.value) {\r\n                    cls.value = sessionValue\r\n                    cls.entries = sessionEntries\r\n                    cls.startTime = performance.now()\r\n                    lazyReportCache(deepCopy(cls))\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const observer = new PerformanceObserver(entryHandler)\r\n    observer.observe({ type: 'layout-shift', buffered: true })\r\n\r\n    if (observer) {\r\n        onHidden(() => {\r\n            observer.takeRecords().map(entryHandler)\r\n        })\r\n    }\r\n}\r\n\r\nfunction formatCLSEntry(entry) {\r\n    const result = entry.toJSON()\r\n    delete result.duration\r\n    delete result.sources\r\n    \r\n    return result\r\n}","import { isSupportPerformanceObserver } from './utils'\r\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nexport default function observeFID() {\r\n    onBFCacheRestore(() => {\r\n        observeFID()\r\n    })\r\n    \r\n    if (!isSupportPerformanceObserver()) {\r\n        const entryHandler = (list) => {\r\n            if (observer) {\r\n                observer.disconnect()\r\n            }\r\n            \r\n            for (const entry of list.getEntries()) {\r\n                const json = entry.toJSON()\r\n                json.nodeName = entry.tagName\r\n                json.event = json.name\r\n                json.name = json.entryType\r\n                json.type = 'performance'\r\n                json.pageURL = getPageURL()\r\n                delete json.cancelable\r\n\r\n                lazyReportCache(json)\r\n            }\r\n        }\r\n    \r\n        const observer = new PerformanceObserver(entryHandler)\r\n        observer.observe({ type: 'first-input', buffered: true })\r\n        return\r\n    }\r\n\r\n    fidPolyfill()\r\n}\r\n\r\nfunction fidPolyfill() {\r\n    eachEventType(window.addEventListener)\r\n}\r\n\r\nfunction onInput(event) {\r\n    // Only count cancelable events, which should trigger behavior\r\n    // important to the user.\r\n    if (event.cancelable) {\r\n        // In some browsers `event.timeStamp` returns a `DOMTimeStamp` value\r\n        // (epoch time) instead of the newer `DOMHighResTimeStamp`\r\n        // (document-origin time). To check for that we assume any timestamp\r\n        // greater than 1 trillion is a `DOMTimeStamp`, and compare it using\r\n        // the `Date` object rather than `performance.now()`.\r\n        // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\r\n        const isEpochTime = event.timeStamp > 1e12\r\n        const now = isEpochTime ? Date.now() : performance.now()\r\n  \r\n        // Input delay is the delta between when the system received the event\r\n        // (e.g. event.timeStamp) and when it could run the callback (e.g. `now`).\r\n        const duration = now - event.timeStamp\r\n\r\n        lazyReportCache({\r\n            duration,\r\n            subType: 'first-input',\r\n            event: event.type,\r\n            name: 'first-input',\r\n            target: event.target.tagName,\r\n            startTime: event.timeStamp,\r\n            type: 'performance',\r\n            pageURL: getPageURL(),\r\n        })\r\n\r\n        eachEventType(window.removeEventListener)\r\n    }\r\n}\r\n\r\nfunction eachEventType(callback) {\r\n    const eventTypes = [\r\n        'mousedown',\r\n        'keydown',\r\n        'touchstart',\r\n    ]\r\n    \r\n    eventTypes.forEach((type) => callback(type, onInput, { passive: true, capture: true }))\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\r\n\r\nexport default function observerLoad() {\r\n    ['load', 'DOMContentLoaded'].forEach(type => onEvent(type))\r\n\r\n    onBFCacheRestore(event => {\r\n        requestAnimationFrame(() => {\r\n            ['load', 'DOMContentLoaded'].forEach(type => {\r\n                lazyReportCache({\r\n                    startTime: performance.now() - event.timeStamp,\r\n                    subType: type.toLocaleLowerCase(),\r\n                    type: 'performance',\r\n                    pageURL: getPageURL(),\r\n                    bfc: true,\r\n                })\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\nfunction onEvent(type) {\r\n    function callback() {\r\n        lazyReportCache({\r\n            type: 'performance',\r\n            subType: type.toLocaleLowerCase(),\r\n            startTime: performance.now(),\r\n        })\r\n\r\n        window.removeEventListener(type, callback, true)\r\n    }\r\n\r\n    window.addEventListener(type, callback, true)\r\n}","import { executeAfterLoad, onBFCacheRestore, getPageURL } from '../utils/utils'\r\nimport { isLCPDone } from './observeLCP'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nlet isOnLoaded = false\r\nexecuteAfterLoad(() => {\r\n    isOnLoaded = true\r\n})\r\n\r\nlet timer\r\nlet observer\r\nfunction checkDOMChange() {\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n        // 等 load、lcp 事件触发后并且 DOM 树不再变化时，计算首屏渲染时间\r\n        if (isOnLoaded && isLCPDone()) {\r\n            observer && observer.disconnect()\r\n            lazyReportCache({\r\n                type: 'performance',\r\n                subType: 'first-screen-paint',\r\n                startTime: getRenderTime(),\r\n                pageURL: getPageURL(),\r\n            })\r\n\r\n            entries = null\r\n        } else {\r\n            checkDOMChange()\r\n        }\r\n    }, 500)\r\n}\r\n\r\nlet entries = []\r\nexport default function observeFirstScreenPaint() {\r\n    if (!MutationObserver) return\r\n\r\n    const next = window.requestAnimationFrame ? requestAnimationFrame : setTimeout\r\n    const ignoreDOMList = ['STYLE', 'SCRIPT', 'LINK', 'META']\r\n    observer = new MutationObserver(mutationList => {\r\n        checkDOMChange()\r\n        const entry = {\r\n            startTime: 0,\r\n            children: [],\r\n        }\r\n        \r\n        next(() => {\r\n            entry.startTime = performance.now()\r\n        })\r\n\r\n        for (const mutation of mutationList) {\r\n            if (mutation.addedNodes.length) {\r\n                for (const node of Array.from(mutation.addedNodes)) {\r\n                    if (\r\n                        node.nodeType === 1 \r\n                        && !ignoreDOMList.includes(node.tagName)\r\n                        && !isInclude(node, entry.children)\r\n                    ) {\r\n                        entry.children.push(node)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (entry.children.length) {\r\n            entries.push(entry)\r\n        }\r\n    })\r\n\r\n    observer.observe(document, {\r\n        childList: true,\r\n        subtree: true,\r\n    })\r\n\r\n    onBFCacheRestore(event => {\r\n        requestAnimationFrame(() => {\r\n            lazyReportCache({\r\n                startTime: performance.now() - event.timeStamp,\r\n                type: 'performance',\r\n                subType: 'first-screen-paint',\r\n                bfc: true,\r\n                pageURL: getPageURL(),\r\n            })\r\n        })\r\n    })\r\n}\r\n\r\nfunction getRenderTime() {\r\n    let startTime = 0\r\n    entries.forEach(entry => {\r\n        for (const node of entry.children) {\r\n            if (isInScreen(node) && entry.startTime > startTime && needToCalculate(node)) {\r\n                startTime = entry.startTime\r\n                break\r\n            }\r\n        }\r\n    })\r\n\r\n    // 需要和当前页面所有加载图片的时间做对比，取最大值\r\n    // 图片请求时间要小于 startTime，响应结束时间要大于 startTime\r\n    performance.getEntriesByType('resource').forEach(item => {\r\n        if (\r\n            item.initiatorType === 'img'\r\n            && item.fetchStart < startTime \r\n            && item.responseEnd > startTime\r\n        ) {\r\n            startTime = item.responseEnd\r\n        }\r\n    })\r\n    \r\n    return startTime\r\n}\r\n\r\nfunction needToCalculate(node) {\r\n    // 隐藏的元素不用计算\r\n    if (window.getComputedStyle(node).display === 'none') return false\r\n    \r\n    // 用于统计的图片不用计算\r\n    if (node.tagName === 'IMG' && node.width < 2 && node.height < 2) {\r\n        return false\r\n    }\r\n    \r\n    return true\r\n}\r\n\r\nfunction isInclude(node, arr) {\r\n    if (!node || node === document.documentElement) {\r\n        return false\r\n    }\r\n    \r\n    if (arr.includes(node)) {\r\n        return true\r\n    }\r\n\r\n    return isInclude(node.parentElement, arr)\r\n}\r\n\r\nconst viewportWidth = window.innerWidth\r\nconst viewportHeight = window.innerHeight\r\n\r\n// dom 对象是否在屏幕内\r\nfunction isInScreen(dom) {\r\n    const rectInfo = dom.getBoundingClientRect()\r\n    if (\r\n        rectInfo.left >= 0 \r\n        && rectInfo.left < viewportWidth\r\n        && rectInfo.top >= 0\r\n        && rectInfo.top < viewportHeight\r\n    ) {\r\n        return true\r\n    }\r\n}","import { originalOpen, originalSend, originalProto } from '../utils/xhr'\r\nimport { lazyReportCache } from '../utils/report'\r\n\r\nfunction overwriteOpenAndSend() {\r\n    originalProto.open = function newOpen(...args) {\r\n        this.url = args[1]\r\n        this.method = args[0]\r\n        originalOpen.apply(this, args)\r\n    }\r\n\r\n    originalProto.send = function newSend(...args) {\r\n        this.startTime = Date.now()\r\n\r\n        const onLoadend = () => {\r\n            this.endTime = Date.now()\r\n            this.duration = this.endTime - this.startTime\r\n\r\n            const { status, duration, startTime, endTime, url, method } = this\r\n            const reportData = {\r\n                status,\r\n                duration,\r\n                startTime,\r\n                endTime,\r\n                url,\r\n                method: (method || 'GET').toUpperCase(),\r\n                success: status >= 200 && status < 300,\r\n                subType: 'xhr',\r\n                type: 'performance',\r\n            }\r\n\r\n            lazyReportCache(reportData)\r\n            \r\n            this.removeEventListener('loadend', onLoadend, true)\r\n        }\r\n\r\n        this.addEventListener('loadend', onLoadend, true)\r\n        originalSend.apply(this, args)\r\n    }\r\n}\r\n\r\nexport default function xhr() {\r\n    overwriteOpenAndSend()\r\n}","import { lazyReportCache } from '../utils/report'\r\n\r\nconst originalFetch = window.fetch\r\n\r\nfunction overwriteFetch() {\r\n    window.fetch = function newFetch(url, config) {\r\n        const startTime = Date.now()\r\n        const reportData = {\r\n            startTime,\r\n            url,\r\n            method: (config?.method || 'GET').toUpperCase(),\r\n            subType: 'fetch',\r\n            type: 'performance',\r\n        }\r\n\r\n        return originalFetch(url, config)\r\n        .then(res => {\r\n            reportData.endTime = Date.now()\r\n            reportData.duration = reportData.endTime - reportData.startTime\r\n\r\n            const data = res.clone()\r\n            reportData.status = data.status\r\n            reportData.success = data.ok\r\n\r\n            lazyReportCache(reportData)\r\n\r\n            return res\r\n        })\r\n        .catch(err => {\r\n            reportData.endTime = Date.now()\r\n            reportData.duration = reportData.endTime - reportData.startTime\r\n            reportData.status = 0\r\n            reportData.success = false\r\n\r\n            lazyReportCache(reportData)\r\n\r\n            throw err\r\n        })\r\n    }\r\n}\r\n\r\nexport default function fetch() {\r\n    overwriteFetch()\r\n}","import { report } from '../utils/report'\r\nimport { deepCopy } from '../utils/utils'\r\n\r\nconst next = window.requestAnimationFrame \r\n    ? requestAnimationFrame : (callback) => { setTimeout(callback, 1000 / 60) }\r\n\r\nconst frames = []\r\n\r\nexport default function fps() {\r\n    let frame = 0\r\n    let lastSecond = Date.now()\r\n\r\n    function calculateFPS() {\r\n        frame++\r\n        const now = Date.now()\r\n        if (lastSecond + 1000 <= now) {\r\n            // 由于 now - lastSecond 的单位是毫秒，所以 frame 要 * 1000\r\n            const fps = Math.round((frame * 1000) / (now - lastSecond))\r\n            frames.push(fps)\r\n                \r\n            frame = 0\r\n            lastSecond = now\r\n        }\r\n    \r\n        // 避免上报太快，缓存一定数量再上报\r\n        if (frames.length >= 60) {\r\n            report(deepCopy({\r\n                frames,\r\n                type: 'performace',\r\n                subType: 'fps',\r\n            }))\r\n    \r\n            frames.length = 0\r\n        }\r\n\r\n        next(calculateFPS)\r\n    }\r\n\r\n    calculateFPS()\r\n}\r\n\r\nexport function isBlocking(fpsList, below = 20, last = 3) {\r\n    let count = 0\r\n    for (let i = 0; i < fpsList.length; i++) {\r\n        if (fpsList[i] && fpsList[i] < below) {\r\n            count++\r\n        } else {\r\n            count = 0\r\n        }\r\n\r\n        if (count >= last) {\r\n            return true\r\n        }\r\n    }\r\n\r\n    return false\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { getPageURL } from '../utils/utils'\r\n\r\nexport default function onVueRouter(Vue, router) {\r\n    let isFirst = true\r\n    let startTime\r\n    router.beforeEach((to, from, next) => {\r\n        // 首次进入页面已经有其他统计的渲染时间可用\r\n        if (isFirst) {\r\n            isFirst = false\r\n            return next()\r\n        }\r\n\r\n        // 给 router 新增一个字段，表示是否要计算渲染时间\r\n        // 只有路由跳转才需要计算\r\n        router.needCalculateRenderTime = true\r\n        startTime = performance.now()\r\n\r\n        next()\r\n    })\r\n\r\n    let timer\r\n    Vue.mixin({\r\n        mounted() {\r\n            if (!router.needCalculateRenderTime) return\r\n\r\n            this.$nextTick(() => {\r\n                // 仅在整个视图都被渲染之后才会运行的代码\r\n                const now = performance.now()\r\n                clearTimeout(timer)\r\n\r\n                timer = setTimeout(() => {\r\n                    router.needCalculateRenderTime = false\r\n                    lazyReportCache({\r\n                        type: 'performance',\r\n                        subType: 'vue-router-change-paint',\r\n                        duration: now - startTime,\r\n                        startTime: now,\r\n                        pageURL: getPageURL(),\r\n                    })\r\n                }, 1000)\r\n            })\r\n        },\r\n    })\r\n}","import observeEntries from './observeEntries'\r\nimport observePaint from './observePaint'\r\nimport observeLCP from './observeLCP'\r\nimport observeCLS from './observeCLS'\r\nimport observeFID from './observeFID'\r\nimport observerLoad from './observerLoad'\r\nimport observeFirstScreenPaint from './observeFirstScreenPaint'\r\nimport xhr from './xhr'\r\nimport fetch from './fetch'\r\nimport fps from './fps'\r\nimport onVueRouter from './onVueRouter'\r\nimport config from '../config'\r\n// 性能的监控\r\nexport default function performance() {\r\n    // 监控上报页面指标信息\r\n    observeEntries()\r\n    observePaint()\r\n    observeLCP()\r\n    observeCLS()\r\n    observeFID()\r\n    xhr()\r\n    fetch()\r\n    fps()\r\n    observerLoad()\r\n    observeFirstScreenPaint()\r\n\r\n    if (config.vue?.Vue && config.vue?.router) {\r\n        onVueRouter(config.vue.Vue, config.vue.router)\r\n    }\r\n}","import generateUniqueID from '../utils/generateUniqueID'\r\n\r\nlet uuid = ''\r\nexport function getUUID() {\r\n    if (uuid) return uuid\r\n\r\n    // 如果是手机 APP，可以调用原生方法或者设备唯一标识当成 uuid\r\n    uuid = localStorage.getItem('uuid')\r\n    if (uuid) return uuid\r\n\r\n    uuid = generateUniqueID()\r\n    localStorage.setItem('uuid', uuid)\r\n    return uuid\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { getUUID } from './utils'\r\nimport { getPageURL } from '../utils/utils'\r\n\r\nexport default function pv() {\r\n    lazyReportCache({\r\n        type: 'behavior',\r\n        subType: 'pv',\r\n        startTime: performance.now(),\r\n        pageURL: getPageURL(),\r\n        referrer: document.referrer,\r\n        uuid: getUUID(),\r\n    })\r\n}","import { report } from '../utils/report'\r\nimport { onBeforeunload, getPageURL } from '../utils/utils'\r\nimport { getUUID } from './utils'\r\n\r\nexport default function pageAccessDuration() {\r\n    onBeforeunload(() => {\r\n        report({\r\n            type: 'behavior',\r\n            subType: 'page-access-duration',\r\n            startTime: performance.now(),\r\n            pageURL: getPageURL(),\r\n            uuid: getUUID(),\r\n        }, true)\r\n    })\r\n}","import { lazyReportCache, report } from '../utils/report'\r\nimport { getUUID } from './utils'\r\nimport { onBeforeunload, executeAfterLoad, getPageURL } from '../utils/utils'\r\n\r\nlet timer\r\nlet startTime = 0\r\nlet hasReport = false\r\nlet pageHeight = 0\r\nlet scrollTop = 0\r\nlet viewportHeight = 0\r\n\r\nexport default function pageAccessHeight() {\r\n    window.addEventListener('scroll', onScroll)\r\n\r\n    onBeforeunload(() => {\r\n        const now = performance.now()\r\n        report({\r\n            startTime: now,\r\n            duration: now - startTime,\r\n            type: 'behavior',\r\n            subType: 'page-access-height',\r\n            pageURL: getPageURL(),\r\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\r\n            uuid: getUUID(),\r\n        }, true)\r\n    })\r\n\r\n    // 页面加载完成后初始化记录当前访问高度、时间\r\n    executeAfterLoad(() => {\r\n        startTime = performance.now()\r\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\r\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\r\n        viewportHeight = window.innerHeight\r\n    })\r\n}\r\n\r\nfunction onScroll() {\r\n    clearTimeout(timer)\r\n    const now = performance.now()\r\n    \r\n    if (!hasReport) {\r\n        hasReport = true\r\n        lazyReportCache({\r\n            startTime: now,\r\n            duration: now - startTime,\r\n            type: 'behavior',\r\n            subType: 'page-access-height',\r\n            pageURL: getPageURL(),\r\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\r\n            uuid: getUUID(),\r\n        })\r\n    }\r\n\r\n    timer = setTimeout(() => {\r\n        hasReport = false\r\n        startTime = now\r\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\r\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\r\n        viewportHeight = window.innerHeight        \r\n    }, 500)\r\n}\r\n\r\nfunction toPercent(val) {\r\n    if (val >= 1) return '100%'\r\n    return (val * 100).toFixed(2) + '%'\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { getPageURL } from '../utils/utils'\r\nimport { getUUID } from './utils'\r\n\r\nexport default function onClick() {\r\n    ['mousedown', 'touchstart'].forEach(eventType => {\r\n        let timer\r\n        window.addEventListener(eventType, event => {\r\n            clearTimeout(timer)\r\n            timer = setTimeout(() => {\r\n                const target = event.target\r\n                const { top, left } = target.getBoundingClientRect()\r\n                \r\n                lazyReportCache({\r\n                    top,\r\n                    left,\r\n                    eventType,\r\n                    pageHeight: document.documentElement.scrollHeight || document.body.scrollHeight,\r\n                    scrollTop: document.documentElement.scrollTop || document.body.scrollTop,\r\n                    type: 'behavior',\r\n                    subType: 'click',\r\n                    target: target.tagName,\r\n                    paths: event.path?.map(item => item.tagName).filter(Boolean),\r\n                    startTime: event.timeStamp,\r\n                    pageURL: getPageURL(),\r\n                    outerHTML: target.outerHTML,\r\n                    innerHTML: target.innerHTML,\r\n                    width: target.offsetWidth,\r\n                    height: target.offsetHeight,\r\n                    viewport: {\r\n                        width: window.innerWidth,\r\n                        height: window.innerHeight,\r\n                    },\r\n                    uuid: getUUID(),\r\n                })\r\n            }, 500)\r\n        })\r\n    })\r\n}","import { lazyReportCache } from '../utils/report'\r\nimport { getUUID } from './utils'\r\n\r\nexport default function onVueRouter(router) {\r\n    router.beforeEach((to, from, next) => {\r\n        // 首次加载页面不用统计\r\n        if (!from.name) {\r\n            return next()\r\n        }\r\n\r\n        const data = {\r\n            params: to.params,\r\n            query: to.query,\r\n        }\r\n\r\n        lazyReportCache({\r\n            data,\r\n            name: to.name || to.path,\r\n            type: 'behavior',\r\n            subType: ['vue-router-change', 'pv'],\r\n            startTime: performance.now(),\r\n            from: from.fullPath,\r\n            to: to.fullPath,\r\n            uuid: getUUID(),\r\n        })\r\n\r\n        next()\r\n    })\r\n}","import { getPageURL } from '../utils/utils'\r\nimport { lazyReportCache } from '../utils/report'\r\nimport { getUUID } from './utils'\r\n\r\nexport default function pageChange() {\r\n    let from = ''\r\n    window.addEventListener('popstate', () => {\r\n        const to = getPageURL()\r\n\r\n        lazyReportCache({\r\n            from,\r\n            to,\r\n            type: 'behavior',\r\n            subType: 'popstate',\r\n            startTime: performance.now(),\r\n            uuid: getUUID(),\r\n        })\r\n\r\n        from = to\r\n    }, true)\r\n\r\n    let oldURL = ''\r\n    window.addEventListener('hashchange', event => {\r\n        const newURL = event.newURL\r\n\r\n        lazyReportCache({\r\n            from: oldURL,\r\n            to: newURL,\r\n            type: 'behavior',\r\n            subType: 'hashchange',\r\n            startTime: performance.now(),\r\n            uuid: getUUID(),\r\n        })\r\n\r\n        oldURL = newURL\r\n    }, true)\r\n}","import pv from './pv'\r\nimport pageAccessDuration from './pageAccessDuration'\r\nimport pageAccessHeight from './pageAccessHeight'\r\nimport onClick from './onClick'\r\nimport config from '../config'\r\nimport onVueRouter from './onVueRouter'\r\nimport pageChange from './pageChange'\r\n\r\nexport default function behavior() {\r\n    pv()\r\n    pageAccessDuration()\r\n    pageAccessHeight()\r\n    onClick()\r\n    pageChange()\r\n\r\n    if (config.vue?.router) {\r\n        onVueRouter(config.vue.router)\r\n    }\r\n}","import error from './error/index'\r\nimport performance from './performance/index'\r\nimport behavior from './behavior/index'\r\nimport { setConfig } from './config'\r\nimport { onBeforeunload, onHidden } from './utils/utils'\r\nimport { report } from './utils/report'\r\nimport { getCache, clearCache } from './utils/cache'\r\n\r\nconst monitor = {\r\n    init(options = {}) {\r\n        // 生成配置\r\n        setConfig(options)\r\n        // 处理报错信息并上传\r\n        error()\r\n        performance()\r\n        behavior();\r\n\r\n        // 当页面进入后台或关闭前时，将所有的 cache 数据进行上报\r\n        [onBeforeunload, onHidden].forEach(fn => {\r\n            fn(() => {\r\n                const data = getCache()\r\n                if (data.length) {\r\n                    report(data, true)\r\n                    clearCache()\r\n                }\r\n            })\r\n        })\r\n    },\r\n    report,\r\n}\r\n\r\nexport default monitor"],"names":["originalProto","XMLHttpRequest","prototype","originalOpen","open","originalSend","send","deepCopy","target","result","Array","isArray","key","onBFCacheRestore","callback","window","addEventListener","event","persisted","onBeforeunload","onHidden","once","onHiddenOrPageHide","type","document","visibilityState","removeEventListener","executeAfterLoad","readyState","onLoad","getPageURL","location","href","cache","getCache","addCache","data","push","clearCache","length","generateUniqueID","Date","now","Math","floor","random","config","url","appID","userID","vue","Vue","router","setConfig","options","isSupportSendBeacon","navigator","sendBeacon","bind","reportWithXHR","sessionID","report","isImmediate","console","error","reportData","JSON","stringify","id","requestIdleCallback","timeout","setTimeout","timer","lazyReportCache","clearTimeout","xhr","call","oldConsoleError","args","apply","subType","startTime","performance","errData","pageURL","e","src","timeStamp","html","outerHTML","resourceType","tagName","paths","path","map","item","filter","Boolean","onerror","msg","line","column","stack","reason","errorHandler","err","vm","info","isSupportPerformanceObserver","PerformanceObserver","observeEntries","observeEvent","hasAlreadyCollected","entryType","entryHandler","list","getEntries","entry","observer","disconnect","nextHopProtocol","initiatorType","name","sourceType","duration","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","isCache","observe","buffered","getEntriesByType","preventType","isSafari","test","userAgent","includes","observePaint","json","toJSON","requestAnimationFrame","forEach","bfc","lcpDone","isLCPDone","observeLCP","element","observeCLS","sessionValue","sessionEntries","cls","value","hadRecentInput","firstSessionEntry","lastSessionEntry","formatCLSEntry","entries","takeRecords","sources","observeFID","nodeName","cancelable","fidPolyfill","eachEventType","onInput","isEpochTime","eventTypes","passive","capture","observerLoad","onEvent","toLocaleLowerCase","isOnLoaded","checkDOMChange","getRenderTime","observeFirstScreenPaint","MutationObserver","next","ignoreDOMList","mutationList","children","mutation","addedNodes","from","node","nodeType","isInclude","childList","subtree","isInScreen","needToCalculate","fetchStart","responseEnd","getComputedStyle","display","width","height","arr","documentElement","parentElement","viewportWidth","innerWidth","viewportHeight","innerHeight","dom","rectInfo","getBoundingClientRect","left","top","overwriteOpenAndSend","newOpen","method","newSend","onLoadend","endTime","status","toUpperCase","success","originalFetch","fetch","overwriteFetch","newFetch","then","res","clone","ok","catch","frames","fps","frame","lastSecond","calculateFPS","round","onVueRouter","isFirst","beforeEach","to","needCalculateRenderTime","mixin","mounted","$nextTick","uuid","getUUID","localStorage","getItem","setItem","pv","referrer","pageAccessDuration","hasReport","pageHeight","scrollTop","pageAccessHeight","onScroll","toPercent","scrollHeight","body","val","toFixed","onClick","eventType","innerHTML","offsetWidth","offsetHeight","viewport","params","query","fullPath","pageChange","oldURL","newURL","behavior","monitor","init","fn"],"mappings":"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"}